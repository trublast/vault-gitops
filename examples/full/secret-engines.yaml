# LDAP secrets engine (dynamic credentials)
---
path: sys/mounts/ldap
data:
  type: ldap
  description: LDAP secrets engine
---
path: ldap/config
dependencies:
  - sys/mounts/ldap
ignore_failures: true
data:
  url: ldap://ldap.example.com
  userdn: ou=People,dc=example,dc=com
  binddn: cn=admin,dc=example,dc=com
  bindpass: secret
  insecure_tls: true

# Kubernetes secrets engine
---
path: sys/mounts/kubernetes
data:
  type: kubernetes
  description: Kubernetes secrets engine
---
path: kubernetes/config
dependencies:
  - sys/mounts/kubernetes
ignore_failures: true
data:
  kubernetes_host: https://kubernetes.default.svc:443

# SSH secrets engine
---
path: sys/mounts/ssh
data:
  type: ssh
  description: SSH secrets engine
---
path: ssh/config/ca
dependencies:
  - sys/mounts/ssh
data:
  generate_signing_key: true
---
path: ssh/roles/deploy
dependencies:
  - ssh/config/ca
data:
  key_type: ca
  allow_user_certificates: true
  allowed_users: "*"
  default_user: ubuntu
  ttl: 30m
  max_ttl: 24h

# KV v1 and KV v2 secrets engines
---
path: sys/mounts/kv-v1
data:
  type: kv
  description: KV secrets engine version 1
  options:
    version: "1"
---
path: sys/mounts/kv-v2
data:
  type: kv
  description: KV secrets engine version 2
  options:
    version: "2"